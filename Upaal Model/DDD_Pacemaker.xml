<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// AUTHOR: Daksh Chauhan 

// Random Heart Modelling Parameters
const int Aminwait = 1;
const int Amaxwait = 1200;
const int Vminwait = 1;
const int Vmaxwait = 1200;


// TIMING CONSTRAINTS;
const int TAEI = 800;
const int TAVI = 150; 
const int TVRP = 150; 
const int TPVARP = 100;
const int TURI = 400;
const int TLRI = TAEI + TAVI;</declaration><template><name x="5" y="5">RA</name><parameter>broadcast chan &amp;AS, broadcast chan &amp;AP</parameter><declaration>
// Random Atrium Declarations
clock x;


</declaration><location id="id0" x="-48" y="-72"><name x="-56" y="-104">RA</name><label kind="invariant" x="-24" y="-80">x&lt;Amaxwait</label><label kind="comments">This state simulates a Random Atrium which would serve as a Heart for out Model</label></location><init ref="id0"/><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-64" y="65">x&gt;Aminwait</label><label kind="synchronisation" x="-64" y="80">AS!</label><label kind="assignment" x="-64" y="95">x=0</label><nail x="-128" y="64"/><nail x="64" y="64"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="synchronisation" x="-56" y="-192">AP?</label><label kind="assignment" x="-56" y="-176">x=0</label><nail x="-128" y="-192"/><nail x="64" y="-192"/></transition></template><template><name>RV</name><parameter>broadcast chan &amp;VS, broadcast chan &amp;VP </parameter><declaration>
// Random Ventricle Declarations
clock x;
</declaration><location id="id1" x="0" y="0"><name x="-10" y="-30">RV</name><label kind="invariant" x="24" y="-8">x&lt;Vmaxwait</label></location><init ref="id1"/><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="-16" y="129">x&gt;Vminwait</label><label kind="synchronisation" x="-16" y="144">VS!</label><label kind="assignment" x="-12" y="160">x=0</label><nail x="-96" y="128"/><nail x="128" y="128"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="synchronisation" x="0" y="-128">VP?</label><label kind="assignment" x="0" y="-113">x=0</label><nail x="-96" y="-128"/><nail x="128" y="-128"/></transition></template><template><name>VRP_Timer</name><parameter>broadcast chan &amp;VRP_Ex  , urgent chan &amp;VRP_Start</parameter><declaration>
clock x;</declaration><location id="id2" x="-32" y="24"><name x="-112" y="16">WaitVRP</name><label kind="invariant" x="-42" y="39">x&lt;= TVRP</label></location><location id="id3" x="-32" y="-176"><name x="-42" y="-206">IDLE</name></location><init ref="id3"/><transition><source ref="id2"/><target ref="id3"/><label kind="guard" x="-160" y="-96">x&gt;= TVRP</label><label kind="synchronisation" x="-156" y="-75">VRP_Ex!</label><nail x="-96" y="-72"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="40" y="-96">VRP_Start?</label><label kind="assignment" x="40" y="-80">x=0</label><nail x="32" y="-72"/></transition></template><template><name>LRI_Timer</name><parameter>broadcast chan &amp;LRI_Ex , urgent chan &amp;LRI_Start , urgent chan &amp;LRI_Stop </parameter><declaration>
clock x;</declaration><location id="id4" x="-80" y="-136"><name x="-64" y="-144">Block</name><committed/></location><location id="id5" x="-200" y="80"><name x="-272" y="72">WaitLRI</name><label kind="invariant" x="-210" y="95">x &lt;= TLRI</label></location><location id="id6" x="-200" y="-136"><name x="-210" y="-166">IDLE</name></location><init ref="id6"/><transition><source ref="id4"/><target ref="id6"/><nail x="-136" y="-120"/></transition><transition><source ref="id6"/><target ref="id4"/><label kind="synchronisation" x="-160" y="-176">LRI_Stop?</label><nail x="-136" y="-152"/></transition><transition><source ref="id5"/><target ref="id6"/><label kind="synchronisation" x="-232" y="-40">LRI_Stop?</label></transition><transition><source ref="id5"/><target ref="id6"/><label kind="guard" x="-336" y="-48">x &gt;= TLRI</label><label kind="synchronisation" x="-328" y="-25">LRI_Ex!</label><nail x="-272" y="-24"/></transition><transition><source ref="id6"/><target ref="id5"/><label kind="synchronisation" x="-128" y="-48">LRI_Start?</label><label kind="assignment" x="-128" y="-24">x=0</label><nail x="-128" y="-24"/></transition></template><template><name>VRP</name><parameter>broadcast chan &amp;VSense, urgent chan &amp;VRP_Start , broadcast chan &amp;VRP_Ex, broadcast chan &amp;VP, broadcast chan &amp;VS</parameter><location id="id7" x="-168" y="-72"><committed/></location><location id="id8" x="152" y="-80"><committed/></location><location id="id9" x="40" y="-80"><name x="-40" y="-88">Wait_VRP</name></location><location id="id10" x="-120" y="-152"><committed/></location><location id="id11" x="-280" y="-72"><name x="-328" y="-80">IDLE</name></location><init ref="id11"/><transition><source ref="id7"/><target ref="id10"/><label kind="synchronisation" x="-200" y="-128">VSense!</label></transition><transition><source ref="id11"/><target ref="id7"/><label kind="synchronisation" x="-240" y="-96">VS?</label></transition><transition><source ref="id8"/><target ref="id9"/><nail x="96" y="-40"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="synchronisation" x="112" y="-136">VS?</label><nail x="96" y="-120"/></transition><transition><source ref="id9"/><target ref="id11"/><label kind="synchronisation" x="-112" y="-32">VRP_Ex?</label><nail x="-8" y="-8"/><nail x="-240" y="-8"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-72" y="-176">VRP_Start!</label><nail x="0" y="-152"/></transition><transition><source ref="id11"/><target ref="id10"/><label kind="synchronisation" x="-224" y="-176">VP?</label><nail x="-248" y="-152"/></transition></template><template><name>LRI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP, urgent chan &amp;LRI_Start, urgent chan &amp;LRI_Stop, broadcast chan &amp;LRI_Ex, broadcast chan &amp;VRP_Ex</parameter><location id="id12" x="-152" y="16"><committed/></location><location id="id13" x="72" y="16"><name x="96" y="8">wait_LRI</name></location><location id="id14" x="-32" y="-72"><committed/></location><location id="id15" x="72" y="-160"><name x="62" y="-190">wait_VRP</name></location><location id="id16" x="-144" y="-160"><committed/></location><location id="id17" x="-296" y="-160"><name x="-352" y="-168">Initial</name></location><init ref="id17"/><transition><source ref="id13"/><target ref="id14"/><label kind="synchronisation" x="-64" y="-48">VP?</label><nail x="-32" y="-24"/></transition><transition><source ref="id17"/><target ref="id16"/><label kind="synchronisation" x="-280" y="-128">VP?</label><nail x="-232" y="-112"/></transition><transition><source ref="id12"/><target ref="id16"/><label kind="synchronisation" x="-176" y="-72">VP!</label></transition><transition><source ref="id13"/><target ref="id12"/><label kind="synchronisation" x="-72" y="24">LRI_Ex?</label></transition><transition><source ref="id14"/><target ref="id16"/><label kind="synchronisation" x="-72" y="-128">LRI_Stop!</label></transition><transition><source ref="id13"/><target ref="id14"/><label kind="synchronisation" x="0" y="-72">VSense?</label></transition><transition><source ref="id15"/><target ref="id13"/><label kind="synchronisation" x="80" y="-88">VRP_Ex?</label></transition><transition><source ref="id16"/><target ref="id15"/><label kind="synchronisation" x="-80" y="-184">LRI_Start!</label></transition><transition><source ref="id17"/><target ref="id16"/><label kind="synchronisation" x="-256" y="-184">VSense?</label></transition></template><template><name>PVARP_Timer</name><parameter>urgent chan &amp;PVARP_Start, broadcast chan &amp;PVARP_Ex</parameter><declaration>clock x;</declaration><location id="id18" x="-464" y="8"><name x="-496" y="24">wait_PVARP</name><label kind="invariant" x="-496" y="48">x &lt;= TPVARP</label></location><location id="id19" x="-464" y="-128"><name x="-480" y="-160">IDLE</name></location><init ref="id19"/><transition><source ref="id18"/><target ref="id19"/><label kind="guard" x="-600" y="-48">x &gt;= TPVARP</label><label kind="synchronisation" x="-600" y="-64">PVARP_Ex!</label><nail x="-512" y="-56"/></transition><transition><source ref="id19"/><target ref="id18"/><label kind="synchronisation" x="-408" y="-72">PVARP_Start?</label><label kind="assignment" x="-392" y="-56">x=0</label><nail x="-416" y="-56"/></transition></template><template><name>PVARP</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP, urgent chan &amp;PVARP_Start, broadcast chan &amp;PVARP_Ex,broadcast chan &amp;ASense, broadcast chan &amp;AS</parameter><location id="id20" x="-912" y="-40"><committed/></location><location id="id21" x="-504" y="-128"><name x="-552" y="-104">wait_PVARP</name></location><location id="id22" x="-696" y="-192"><committed/></location><location id="id23" x="-856" y="-120"><name x="-896" y="-176">IDLE</name></location><init ref="id23"/><transition><source ref="id20"/><target ref="id23"/><label kind="synchronisation" x="-944" y="-95">ASense!</label></transition><transition><source ref="id23"/><target ref="id20"/><label kind="synchronisation" x="-848" y="-56">AS?</label><nail x="-856" y="-40"/></transition><transition><source ref="id21"/><target ref="id23"/><label kind="synchronisation" x="-728" y="-72">PVARP_Ex?</label><nail x="-568" y="-48"/><nail x="-808" y="-48"/></transition><transition><source ref="id22"/><target ref="id21"/><label kind="synchronisation" x="-656" y="-176">PVARP_Start!</label><nail x="-568" y="-192"/></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="-784" y="-144">VP?</label><nail x="-744" y="-120"/></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="-832" y="-216">VSense?</label><nail x="-856" y="-136"/><nail x="-816" y="-192"/></transition></template><template><name>URI_Timer</name><parameter>broadcast chan &amp;URI_Ex, urgent chan &amp;URI_Start, urgent chan &amp;URI_Stop</parameter><declaration>clock x;</declaration><location id="id24" x="-376" y="72"><name x="-400" y="88">wait_URI</name><label kind="invariant" x="-400" y="112">x &lt;= TURI</label></location><location id="id25" x="-376" y="-128"><name x="-392" y="-160">IDLE</name></location><init ref="id25"/><transition><source ref="id24"/><target ref="id25"/><label kind="synchronisation" x="-416" y="-40">URI_Stop?</label></transition><transition><source ref="id24"/><target ref="id25"/><label kind="guard" x="-512" y="-8">x &gt;= TURI</label><label kind="synchronisation" x="-512" y="-32">URI_Ex!</label><nail x="-440" y="-24"/></transition><transition><source ref="id25"/><target ref="id24"/><label kind="synchronisation" x="-304" y="-40">URI_Start?</label><label kind="assignment" x="-304" y="-24">x=0</label><nail x="-312" y="-24"/></transition></template><template><name>URI</name><parameter>broadcast chan &amp;VP, broadcast chan &amp;VSense, broadcast chan &amp;VP_Req,  urgent chan &amp;LRI_Stop,  broadcast chan &amp;VRP_Ex, urgent chan &amp;URI_Start, urgent chan &amp;URI_Stop ,broadcast chan &amp;URI_Ex</parameter><location id="id26" x="-120" y="-200"></location><location id="id27" x="-120" y="-16"><committed/></location><location id="id28" x="48" y="-16"><name x="64" y="-24">pace</name></location><location id="id29" x="48" y="-136"><name x="64" y="-144">wait_URI</name></location><location id="id30" x="-120" y="-136"><name x="-152" y="-120">wait_VRP</name></location><location id="id31" x="-336" y="-16"><committed/></location><location id="id32" x="-440" y="-16"><name x="-512" y="0">Reset_LRI</name><committed/></location><location id="id33" x="-336" y="-136"><committed/></location><location id="id34" x="-520" y="-136"><name x="-568" y="-144">IDLE</name></location><init ref="id34"/><transition><source ref="id26"/><target ref="id33"/><label kind="synchronisation" x="-264" y="-192">URI_Stop!</label></transition><transition><source ref="id29"/><target ref="id26"/><label kind="synchronisation" x="-64" y="-200">VSense?</label></transition><transition><source ref="id27"/><target ref="id33"/><label kind="synchronisation" x="-216" y="-88">URI_Stop!</label></transition><transition><source ref="id28"/><target ref="id27"/><label kind="synchronisation" x="-56" y="-16">VSense?</label></transition><transition><source ref="id28"/><target ref="id32"/><label kind="synchronisation" x="-264" y="16">URI_Ex?</label><nail x="48" y="40"/><nail x="-440" y="40"/></transition><transition><source ref="id29"/><target ref="id34"/><label kind="synchronisation" x="-272" y="-224">URI_Ex?</label><nail x="48" y="-232"/><nail x="-520" y="-232"/></transition><transition><source ref="id29"/><target ref="id28"/><label kind="synchronisation" x="-16" y="-96">VP_Req?</label></transition><transition><source ref="id30"/><target ref="id29"/><label kind="synchronisation" x="-72" y="-160">VRP_Ex?</label></transition><transition><source ref="id33"/><target ref="id30"/><label kind="synchronisation" x="-264" y="-160">URI_Start!</label></transition><transition><source ref="id31"/><target ref="id33"/><label kind="synchronisation" x="-328" y="-80">VP!</label></transition><transition><source ref="id32"/><target ref="id31"/><label kind="synchronisation" x="-424" y="-40">LRI_Stop!</label><nail x="-400" y="-16"/></transition><transition><source ref="id34"/><target ref="id32"/><label kind="synchronisation" x="-584" y="-64">VP_Req?</label><nail x="-520" y="-16"/></transition><transition><source ref="id34"/><target ref="id33"/><label kind="synchronisation" x="-440" y="-128">VP?</label><nail x="-432" y="-96"/></transition><transition><source ref="id34"/><target ref="id33"/><label kind="synchronisation" x="-464" y="-208">VSense?</label><nail x="-432" y="-184"/></transition></template><template><name>AVI_Timer</name><parameter>urgent chan &amp;AVI_Start, urgent chan &amp;AVI_Stop, broadcast chan &amp;AVI_Ex</parameter><declaration>clock x;</declaration><location id="id35" x="-56" y="104"><name x="-40" y="96">wait_AVI</name><label kind="invariant" x="-80" y="120">x &lt;= TAVI</label></location><location id="id36" x="-56" y="-104"><name x="-66" y="-134">IDLE</name></location><init ref="id36"/><transition><source ref="id35"/><target ref="id36"/><label kind="synchronisation" x="-80" y="-8">AVI_Stop?</label></transition><transition><source ref="id35"/><target ref="id36"/><label kind="guard" x="-192" y="-16">x &gt;= TAVI</label><label kind="synchronisation" x="-192" y="-1">AVI_Ex!</label><nail x="-128" y="0"/></transition><transition><source ref="id36"/><target ref="id35"/><label kind="synchronisation" x="24" y="-16">AVI_Start?</label><label kind="assignment" x="40" y="0">x=0</label><nail x="24" y="0"/></transition></template><template><name>AVI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP, broadcast chan &amp;ASense, broadcast chan &amp;AP, broadcast chan &amp;VP_Req, broadcast chan &amp;PVARP_Ex, urgent chan &amp;AVI_Start, urgent chan &amp;AVI_Stop, broadcast chan &amp;AVI_Ex</parameter><location id="id37" x="-456" y="-16"><committed/></location><location id="id38" x="-408" y="56"><committed/></location><location id="id39" x="-368" y="-104"><committed/></location><location id="id40" x="-264" y="-16"><name x="-240" y="-24">wait_AVI</name></location><location id="id41" x="-456" y="-184"><committed/></location><location id="id42" x="-616" y="-112"><name x="-664" y="-112">IDLE</name></location><init ref="id42"/><transition><source ref="id41"/><target ref="id40"/><label kind="synchronisation" x="-256" y="-152">AVI_Start!</label><nail x="-264" y="-184"/></transition><transition><source ref="id40"/><target ref="id38"/><label kind="synchronisation" x="-328" y="16">VP?</label></transition><transition><source ref="id37"/><target ref="id42"/><label kind="synchronisation" x="-576" y="-48">VP_Req!</label></transition><transition><source ref="id38"/><target ref="id42"/><label kind="synchronisation" x="-584" y="32">AVI_Stop!</label><nail x="-616" y="56"/></transition><transition><source ref="id40"/><target ref="id37"/><label kind="synchronisation" x="-400" y="-40">AVI_Ex?</label></transition><transition><source ref="id40"/><target ref="id38"/><label kind="synchronisation" x="-328" y="56">VSense?</label><nail x="-296" y="56"/></transition><transition><source ref="id39"/><target ref="id41"/><label kind="synchronisation" x="-400" y="-152">AVI_Stop!</label></transition><transition><source ref="id40"/><target ref="id39"/><label kind="synchronisation" x="-336" y="-96">ASense?</label></transition><transition><source ref="id42"/><target ref="id41"/><label kind="synchronisation" x="-544" y="-128">AP?</label><nail x="-608" y="-104"/><nail x="-488" y="-104"/></transition><transition><source ref="id42"/><target ref="id41"/><label kind="synchronisation" x="-560" y="-184">ASense?</label><nail x="-592" y="-184"/></transition></template><template><name>AEI_Timer</name><parameter>urgent chan &amp;AEI_Start, urgent chan &amp;AEI_Stop, broadcast chan &amp;AEI_Ex</parameter><declaration>clock x;</declaration><location id="id43" x="-40" y="112"><name x="-64" y="128">wait_AEI</name><label kind="invariant" x="-64" y="144">x &lt;= TAEI</label></location><location id="id44" x="-40" y="-96"><name x="-56" y="-128">IDLE</name></location><init ref="id44"/><transition><source ref="id43"/><target ref="id44"/><label kind="synchronisation" x="-64" y="0">AEI_Stop?</label></transition><transition><source ref="id43"/><target ref="id44"/><label kind="guard" x="-184" y="8">x &gt;= TAEI</label><label kind="synchronisation" x="-176" y="-8">AEI_Ex!</label><nail x="-120" y="8"/></transition><transition><source ref="id44"/><target ref="id43"/><label kind="synchronisation" x="56" y="-8">AEI_Start?</label><label kind="assignment" x="56" y="8">x=0</label><nail x="48" y="8"/></transition></template><template><name>AEI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP, broadcast chan &amp;ASense, broadcast chan &amp;AP, broadcast chan &amp;PVARP_Ex, urgent chan &amp;AEI_Start, urgent chan &amp;AEI_Stop, broadcast chan &amp;AEI_Ex</parameter><location id="id45" x="-200" y="0"></location><location id="id46" x="-48" y="-64"><committed/></location><location id="id47" x="-72" y="48"><committed/></location><location id="id48" x="40" y="0"><name x="72" y="-8">wait_AEI</name></location><location id="id49" x="40" y="-136"><name x="64" y="-144">wait_PVARP</name></location><location id="id50" x="-128" y="-136"><committed/></location><location id="id51" x="-280" y="-48"><name x="-320" y="-56">Idle</name></location><init ref="id51"/><transition><source ref="id47"/><target ref="id45"/><label kind="synchronisation" x="-152" y="24">AP!</label><nail x="-200" y="48"/></transition><transition><source ref="id48"/><target ref="id45"/><label kind="synchronisation" x="-144" y="-24">ASense?</label></transition><transition><source ref="id45"/><target ref="id51"/><label kind="synchronisation" x="-288" y="-16">AEI_Stop!</label></transition><transition><source ref="id46"/><target ref="id50"/><label kind="synchronisation" x="-136" y="-96">AEI_Stop!</label></transition><transition><source ref="id48"/><target ref="id46"/><label kind="synchronisation" x="-64" y="-40">VSense?</label></transition><transition><source ref="id48"/><target ref="id47"/><label kind="synchronisation" x="-24" y="32">AEI_Ex?</label></transition><transition><source ref="id49"/><target ref="id48"/><label kind="synchronisation" x="48" y="-96">PVARP_Ex?</label></transition><transition><source ref="id50"/><target ref="id49"/><label kind="synchronisation" x="-88" y="-136">AEI_Start!</label></transition><transition><source ref="id51"/><target ref="id50"/><label kind="synchronisation" x="-216" y="-48">VP?</label><nail x="-168" y="-48"/></transition><transition><source ref="id51"/><target ref="id50"/><label kind="synchronisation" x="-224" y="-136">VSense?</label><nail x="-240" y="-136"/></transition></template><template><name>Monitor_LRI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP</parameter><declaration>clock t;</declaration><location id="id52" x="80" y="-24"><name x="70" y="-54">Detected</name><committed/></location><location id="id53" x="-88" y="-24"><name x="-104" y="-64">wait</name></location><location id="id54" x="-240" y="-24"><name x="-280" y="-32">Idle</name></location><init ref="id54"/><transition><source ref="id52"/><target ref="id53"/><label kind="assignment" x="-16" y="56">t=0</label><nail x="80" y="80"/><nail x="-88" y="80"/></transition><transition><source ref="id53"/><target ref="id52"/><label kind="synchronisation" x="-16" y="-8">VP?</label><nail x="-48" y="16"/><nail x="40" y="16"/></transition><transition><source ref="id53"/><target ref="id52"/><label kind="synchronisation" x="-24" y="-88">VSense?</label><nail x="-48" y="-64"/><nail x="32" y="-64"/></transition><transition><source ref="id54"/><target ref="id53"/><label kind="synchronisation" x="-184" y="17">VP?</label><label kind="assignment" x="-184" y="32">t=0</label><nail x="-208" y="16"/><nail x="-120" y="16"/></transition><transition><source ref="id54"/><target ref="id53"/><label kind="synchronisation" x="-184" y="-96">VSense?</label><label kind="assignment" x="-184" y="-81">t=0</label><nail x="-208" y="-64"/><nail x="-128" y="-64"/></transition></template><template><name>Monitor_VRP</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP</parameter><declaration>clock t;</declaration><location id="id55" x="120" y="-40"><name x="110" y="-70">Detected</name><committed/></location><location id="id56" x="-72" y="-40"><name x="-82" y="-70">wait</name></location><location id="id57" x="-232" y="-40"><name x="-242" y="-70">Idle</name></location><init ref="id57"/><transition><source ref="id56"/><target ref="id55"/><label kind="synchronisation" x="8" y="-32">VP?</label><nail x="16" y="-8"/></transition><transition><source ref="id55"/><target ref="id56"/><label kind="assignment" x="16" y="40">t=0</label><nail x="120" y="64"/><nail x="-72" y="64"/></transition><transition><source ref="id56"/><target ref="id55"/><label kind="synchronisation" x="-8" y="-96">VSense?</label><nail x="16" y="-80"/></transition><transition><source ref="id57"/><target ref="id56"/><label kind="synchronisation" x="-168" y="0">VP?</label><label kind="assignment" x="-168" y="16">t=0</label><nail x="-160" y="0"/></transition><transition><source ref="id57"/><target ref="id56"/><label kind="synchronisation" x="-168" y="-96">VSense?</label><label kind="assignment" x="-168" y="-72">t=0</label><nail x="-160" y="-80"/></transition></template><template><name>Monitor_PVARP</name><parameter>broadcast chan &amp;ASense, broadcast chan &amp;AP, broadcast chan &amp;VSense , broadcast chan &amp;VP</parameter><declaration>clock t;</declaration><location id="id58" x="88" y="-24"><name x="78" y="-54">Detected</name><committed/></location><location id="id59" x="-80" y="-24"><name x="-90" y="-54">wait</name></location><location id="id60" x="-248" y="-24"><name x="-288" y="-40">Idle</name></location><init ref="id60"/><transition><source ref="id58"/><target ref="id60"/><nail x="88" y="112"/><nail x="-248" y="112"/></transition><transition><source ref="id59"/><target ref="id58"/><label kind="synchronisation" x="-24" y="16">ASense?</label><nail x="0" y="16"/></transition><transition><source ref="id59"/><target ref="id58"/><label kind="synchronisation" x="-8" y="-80">AP?</label><nail x="0" y="-64"/></transition><transition><source ref="id60"/><target ref="id59"/><label kind="synchronisation" x="-192" y="16">VSense?</label><label kind="assignment" x="-176" y="32">t=0</label><nail x="-168" y="16"/></transition><transition><source ref="id60"/><target ref="id59"/><label kind="synchronisation" x="-176" y="-96">VP?</label><label kind="assignment" x="-176" y="-81">t=0</label><nail x="-168" y="-64"/></transition></template><template><name>Monitor_URI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP</parameter><declaration>clock t;</declaration><location id="id61" x="16" y="40"><committed/></location><location id="id62" x="112" y="-32"><name x="102" y="-62">Detected</name><committed/></location><location id="id63" x="-72" y="-32"><name x="-82" y="-62">wait</name></location><location id="id64" x="-240" y="-32"><name x="-250" y="-62">Idle</name></location><init ref="id64"/><transition><source ref="id63"/><target ref="id61"/><label kind="synchronisation" x="-24" y="-8">VSense?</label></transition><transition><source ref="id61"/><target ref="id63"/><label kind="assignment" x="-64" y="8">t=0</label><nail x="-72" y="40"/></transition><transition><source ref="id62"/><target ref="id61"/><nail x="112" y="40"/></transition><transition><source ref="id63"/><target ref="id62"/><label kind="synchronisation" x="8" y="-56">VP?</label></transition><transition><source ref="id64"/><target ref="id63"/><label kind="synchronisation" x="-168" y="8">VP?</label><label kind="assignment" x="-168" y="23">t=0</label><nail x="-160" y="8"/></transition><transition><source ref="id64"/><target ref="id63"/><label kind="synchronisation" x="-184" y="-104">VSense?</label><label kind="assignment" x="-168" y="-88">t=0</label><nail x="-160" y="-72"/></transition></template><template><name>Monitor_AVI</name><parameter>broadcast chan &amp;VSense, broadcast chan &amp;VP, urgent chan &amp;AVI_Start, broadcast chan &amp;AVI_Ex,broadcast chan &amp;LRI_Ex, broadcast chan &amp;LRI_Stop</parameter><declaration>clock t;
</declaration><location id="id65" x="-416" y="56"><committed/></location><location id="id66" x="-264" y="-56"><name x="-280" y="-88">Detected</name><committed/></location><location id="id67" x="-416" y="-56"></location><location id="id68" x="-544" y="-56"><name x="-554" y="-86">Idle</name></location><init ref="id68"/><transition><source ref="id67"/><target ref="id65"/><label kind="synchronisation" x="-448" y="-16">LRI_Stop?</label></transition><transition><source ref="id67"/><target ref="id65"/><label kind="synchronisation" x="-384" y="-40">LRI_Ex?</label><nail x="-368" y="0"/></transition><transition><source ref="id66"/><target ref="id65"/></transition><transition><source ref="id65"/><target ref="id68"/><nail x="-544" y="56"/></transition><transition><source ref="id67"/><target ref="id65"/><label kind="synchronisation" x="-512" y="-8">AVI_Ex?</label><nail x="-456" y="0"/></transition><transition><source ref="id67"/><target ref="id66"/><label kind="synchronisation" x="-368" y="-80">VP?</label></transition><transition><source ref="id68"/><target ref="id67"/><label kind="synchronisation" x="-512" y="-80">AVI_Start?</label><label kind="assignment" x="-496" y="-56">t=0</label></transition></template><template><name>Monitor_AEI</name><parameter>broadcast chan &amp;AEI_Start, broadcast chan &amp;AP, broadcast chan &amp;AEI_Stop, broadcast chan &amp;AEI_Ex</parameter><location id="id69" x="-120" y="56"><committed/></location><location id="id70" x="48" y="-48"><name x="38" y="-78">Detected</name><committed/></location><location id="id71" x="-120" y="-48"><name x="-128" y="-80">wait</name></location><location id="id72" x="-264" y="-48"><name x="-274" y="-78">Idle</name></location><init ref="id72"/><transition><source ref="id70"/><target ref="id69"/><nail x="48" y="56"/></transition><transition><source ref="id71"/><target ref="id69"/><label kind="synchronisation" x="-200" y="-8">AEI_Stop?</label><nail x="-88" y="0"/></transition><transition><source ref="id71"/><target ref="id69"/><label kind="synchronisation" x="-88" y="-8">AEI_Ex?</label></transition><transition><source ref="id69"/><target ref="id72"/><nail x="-264" y="56"/></transition><transition><source ref="id71"/><target ref="id70"/><label kind="synchronisation" x="-72" y="-72">AP?</label></transition><transition><source ref="id72"/><target ref="id71"/><label kind="synchronisation" x="-232" y="-72">AEI_Start?</label></transition></template><template><name>Monitor_AVI_Ext</name><parameter>broadcast chan &amp;ASense, broadcast chan &amp;AP, broadcast chan &amp;VSense, broadcast chan &amp;VP</parameter><declaration>clock t;</declaration><location id="id73" x="-296" y="48"><committed/></location><location id="id74" x="-200" y="-56"><name x="-210" y="-86">Detected</name><committed/></location><location id="id75" x="-376" y="-56"><name x="-386" y="-86">wait</name></location><location id="id76" x="-544" y="-56"><name x="-554" y="-86">idle</name></location><init ref="id76"/><transition><source ref="id74"/><target ref="id73"/><nail x="-208" y="-48"/></transition><transition><source ref="id75"/><target ref="id73"/><label kind="synchronisation" x="-344" y="-24">ASense?</label><nail x="-296" y="-8"/></transition><transition><source ref="id75"/><target ref="id73"/><label kind="synchronisation" x="-408" y="0">VSense?</label><nail x="-352" y="32"/></transition><transition><source ref="id73"/><target ref="id76"/><nail x="-544" y="48"/></transition><transition><source ref="id75"/><target ref="id74"/><label kind="synchronisation" x="-312" y="-80">VP?</label></transition><transition><source ref="id76"/><target ref="id75"/><label kind="synchronisation" x="-472" y="-24">AP?</label><label kind="assignment" x="-424" y="-40">t=0</label><nail x="-464" y="-24"/></transition><transition><source ref="id76"/><target ref="id75"/><label kind="synchronisation" x="-488" y="-112">ASense?</label><label kind="assignment" x="-424" y="-96">t=0</label><nail x="-464" y="-96"/></transition></template><system>// Author: DAKSH CHAUHAN 

// All the appropriate signals used 
broadcast chan VS,AS;
broadcast chan VSense,VP, ASense, AP;
broadcast chan VRP_Ex, LRI_Ex, PVARP_Ex, URI_Ex , AVI_Ex, AEI_Ex;	
broadcast chan VP_Req;

// Certain Start/Stop signals are also broadcast. This is done since Monitor also comsumes some signals
urgent chan VRP_Start, LRI_Start;
broadcast chan LRI_Stop;
urgent chan PVARP_Start, URI_Start, URI_Stop;
broadcast chan AVI_Start, AVI_Stop;
broadcast chan AEI_Start, AEI_Stop;


// See _Inst to indicate an Instance of a component.

Random_Atrium = RA(AS, AP);
Random_Ventricle = RV(VS, VP);

VRP_Timer_Inst = VRP_Timer(VRP_Ex, VRP_Start);
VRP_Inst = VRP(VSense, VRP_Start , VRP_Ex, VP, VS);

LRI_Timer_Inst = LRI_Timer(LRI_Ex, LRI_Start, LRI_Stop);
LRI_Inst = LRI(VSense, VP, LRI_Start, LRI_Stop, LRI_Ex, VRP_Ex);

PVARP_Timer_Inst = PVARP_Timer(PVARP_Start,PVARP_Ex);
PVARP_Inst = PVARP(VSense,VP,PVARP_Start,PVARP_Ex,ASense,AS);

URI_Timer_Inst = URI_Timer(URI_Ex,URI_Start,URI_Stop);
URI_Inst = URI(VP,VSense, VP_Req, LRI_Stop, VRP_Ex, URI_Start, URI_Stop, URI_Ex );


AVI_Timer_Inst = AVI_Timer(AVI_Start, AVI_Stop, AVI_Ex);
AVI_Inst = AVI(VSense, VP, ASense, AP, VP_Req, PVARP_Ex, AVI_Start, AVI_Stop, AVI_Ex);

AEI_Timer_Inst = AEI_Timer( AEI_Start, AEI_Stop, AEI_Ex);
AEI_Inst = AEI( VSense, VP, ASense, AP, PVARP_Ex, AEI_Start, AEI_Stop, AEI_Ex);

// List of All Monitors
LRI_Monitor = Monitor_LRI(VSense,VP);
VRP_Monitor = Monitor_VRP(VSense,VP);
PVARP_Monitor = Monitor_PVARP(ASense,AP, VSense, VP);
URI_Monitor = Monitor_URI(VSense,VP);
AVI_Monitor = Monitor_AVI(VSense, VP,AVI_Start, AVI_Ex, LRI_Ex, LRI_Stop);
AEI_Monitor = Monitor_AEI(AEI_Start, AP, AEI_Stop, AEI_Ex);
AVI_Ext_Monitor = Monitor_AVI_Ext(ASense, AP, VSense, VP);

// Composing the entire system
system Random_Atrium,Random_Ventricle,
	VRP_Inst,VRP_Timer_Inst, 
	LRI_Timer_Inst, LRI_Inst,
	PVARP_Inst, PVARP_Timer_Inst, 
	URI_Timer_Inst, URI_Inst,
	AVI_Timer_Inst, AVI_Inst,
	AEI_Timer_Inst, AEI_Inst,
	LRI_Monitor,
	VRP_Monitor,
	PVARP_Monitor,
	URI_Monitor,
	AVI_Monitor,
	AEI_Monitor,
	AVI_Ext_Monitor
	;


</system></nta>